import{u as M,c,a as G,b as J,d as V,t as h,e as S,f as E,g as O,h as j,i as g,L as I,o as B,F as K,R as H,j as N,O as Y,k as z,S as Q,r as W}from"./vendor.ebb31423.js";const X=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}};X();const q="inventorystore";function Z(p){const s=localStorage.getItem(q),[a,l]=G(s?JSON.parse(s):p);return J(()=>{localStorage.setItem(q,JSON.stringify(a))}),[a,l]}const U=V();function ee(p){const[s,a]=Z({id:"",email:"",token:"",products:[]}),l=[s,{updateUserInfo(e){a("id",t=>e.id),a("email",t=>e.email),a("token",t=>e.token)},updateProducts(e){a("products",t=>e)}}];return c(U.Provider,{value:l,get children(){return p.children}})}function y(){return M(U)}const R=window.location.origin;console.log("API ENDPOINT - ",R,window.location);const A={headers:{"Content-Type":"application/json",Accept:"application/json"}},te={method:"GET",...A},ne={method:"POST",...A},le=async(p,s)=>{let a={...te};s&&(a.headers["x-access-token"]=s);const l=await fetch(`${R}${p}`,a);if(!l.ok)throw Error(l.message);return await l.json()},D=async(p,s,a)=>{let l={...ne,body:JSON.stringify(s)};a&&(l.headers["x-access-token"]=a);const e=await fetch(`${R}${p}`,l);if(!e.ok)throw Error(e.message);return await e.json()},re=h('<form id="loginForm" class="formsignin" style="text-align: center; margin-top: 10rem;"><h1 class="h3 mb-3 font-weight-normal">Please sign in</h1><input type="email" class="form-control" placeholder="Email address" required autofocus><input type="password" class="form-control" placeholder="Password" required><button class="btn btn-lg btn-success btn-block" type="button">Sign in</button></form>');function se(p){const[s,{updateUserInfo:a}]=y(),[l,e]=E("user1@buyproducts.com"),[t,n]=E("user123"),m=async i=>{if(!document.getElementById("loginForm").checkValidity()){alert("all inputs are mandatory");return}try{const r={email:l(),password:t()},u=await D("/api/login/",r);a({id:u.id,email:u.email,token:u.token})}catch(r){throw alert("ERROR in login : "+r),r}};return(()=>{const i=re.cloneNode(!0),d=i.firstChild,r=d.nextSibling,u=r.nextSibling,$=u.nextSibling;return r.$$input=f=>{e(f.target.value)},u.$$input=f=>{n(f.target.value)},$.$$click=m,O(f=>{const b=l(),v=t();return b!==f._v$&&(r.value=f._v$=b),v!==f._v$2&&(u.value=f._v$2=v),f},{_v$:void 0,_v$2:void 0}),i})()}S(["input","click"]);const ae=h('<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse"><div class="position-sticky pt-3"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link active" aria-current="page" href="#"><span data-feather="home"></span></a></li><li class="nav-item"><a class="nav-link active" aria-current="page" href="#"><span data-feather="home"></span></a></li><li class="nav-item"><a class="nav-link" href="#"><span data-feather="file"></span></a></li><li class="nav-item"><a class="nav-link" href="#"><span data-feather="users"></span><span>Customers</span></a></li><li class="nav-item"><a class="nav-link" href="#"><span data-feather="bar-chart-2"></span><span>Reports</span></a></li><li class="nav-item"><a class="nav-link" href="#"><span data-feather="layers"></span><span>Integrations</span></a></li></ul></div></nav>');function ie(p){y();const s=()=>{alert("TODO")};return j(),(()=>{const a=ae.cloneNode(!0),l=a.firstChild,e=l.firstChild,t=e.firstChild,n=t.firstChild;n.firstChild;const m=t.nextSibling,i=m.firstChild;i.firstChild;const d=m.nextSibling,r=d.firstChild;r.firstChild;const u=d.nextSibling,$=u.firstChild,f=$.firstChild,b=f.nextSibling,v=u.nextSibling,_=v.firstChild,P=_.firstChild,x=P.nextSibling,o=v.nextSibling,C=o.firstChild,k=C.firstChild,w=k.nextSibling;return g(n,c(I,{href:"/",children:"Home"}),null),g(i,c(I,{href:"/products",children:"Products"}),null),g(r,c(I,{href:"/createproduct",children:"New Product"}),null),b.$$click=s,x.$$click=s,w.$$click=s,a})()}S(["click"]);const oe=h('<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"><h1 class="h2">Products</h1><div class="btn-toolbar mb-2 mb-md-0"><div class="btn-group me-2"><input type="text" class="form-control" placeholder="category"><button type="button" class="btn btn-sm btn-success">Refresh</button></div></div></div>'),ce=h('<div class="table-responsive"><table class="table table-striped table-sm"><thead><tr><th scope="col">Id</th><th scope="col">Name</th><th scope="col">Category</th><th scope="col">Description</th><th scope="col">Units</th></tr></thead><tbody></tbody></table></div>'),de=h("<div>Loading...</div>"),ue=h("<tr><td></td><td></td><td></td><td></td><td></td></tr>");function F(p){const[s,{updateProducts:a}]=y(),[l,e]=E(null),t=async()=>{try{const n=l()??"",m=await le("/api/products/"+n,s.token);a(m.data)}catch(n){throw alert("ERROR in getProducts : "+n),n}};return B(async()=>{await t()}),[(()=>{const n=oe.cloneNode(!0),m=n.firstChild,i=m.nextSibling,d=i.firstChild,r=d.firstChild,u=r.nextSibling;return r.$$input=$=>{e($.target.value)},u.$$click=t,O(()=>r.value=l()),n})(),(()=>{const n=ce.cloneNode(!0),m=n.firstChild,i=m.firstChild,d=i.nextSibling;return g(d,c(K,{get each(){return s.products},get fallback(){return de.cloneNode(!0)},children:r=>(()=>{const u=ue.cloneNode(!0),$=u.firstChild,f=$.nextSibling,b=f.nextSibling,v=b.nextSibling,_=v.nextSibling;return g($,()=>r.id),g(f,()=>r.name),g(b,()=>r.category),g(v,()=>r.description),g(_,()=>r.units),u})()})),n})()]}S(["input","click"]);const pe=h('<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"><h1 class="h2">New Product</h1><div class="btn-toolbar mb-2 mb-md-0"><div class="btn-group me-2"><button type="button" class="btn btn-sm btn-success">Save</button></div></div></div>'),fe=h('<form id="loginForm" class="form"><label class="form-label">Id</label><input type="text" class="form-control" placeholder="id" required autofocus><label class="form-label pt-3">Name</label><input type="text" class="form-control" placeholder="name" required autofocus><label class="form-label pt-3">Category</label><input type="text" class="form-control" placeholder="category" required autofocus><label class="form-label pt-3">Description</label><textarea rows="5" class="form-control" placeholder="description" required></textarea><label class="form-label pt-3">Units</label><input type="number" class="form-control" min="1" placeholder="units" required></form>');function me(p){const[s,{updateProducts:a}]=y(),[l,e]=G({id:"ID10",name:"Product Name",category:"Commercial",description:"Sample description",units:1}),t=j(),n=(i,d)=>{e(i,d)},m=async()=>{try{const d=await D("/api/products/",l,s.token);t("/products",{replace:!0}),alert("saved - "+d?.data?.id)}catch(i){throw alert("ERROR in saveProduct : "+i),i}};return[(()=>{const i=pe.cloneNode(!0),d=i.firstChild,r=d.nextSibling,u=r.firstChild,$=u.firstChild;return $.$$click=m,i})(),(()=>{const i=fe.cloneNode(!0),d=i.firstChild,r=d.nextSibling,u=r.nextSibling,$=u.nextSibling,f=$.nextSibling,b=f.nextSibling,v=b.nextSibling,_=v.nextSibling,P=_.nextSibling,x=P.nextSibling;return r.$$input=o=>{n("id",o.target.value)},$.$$input=o=>{n("name",o.target.value)},b.$$input=o=>{n("category",o.target.value)},_.$$input=o=>{n("description",o.target.value)},x.$$input=o=>{n("units",o.target.value)},O(o=>{const C=l.id,k=l.name,w=l.category,T=l.description,L=l.units;return C!==o._v$&&(r.value=o._v$=C),k!==o._v$2&&($.value=o._v$2=k),w!==o._v$3&&(b.value=o._v$3=w),T!==o._v$4&&(_.value=o._v$4=T),L!==o._v$5&&(x.value=o._v$5=L),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),i})()]}S(["click","input"]);const $e=h("<div>...</div>");function ge(p){return $e.cloneNode(!0)}const be=h('<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow"><a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Inventory</a><button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="navbar-nav"><div class="nav-item text-nowrap"><a class="nav-link px-3" href="#"> - Sign out</a></div></div></header>'),he=h('<div class="container-fluid"><div class="row"><main class="col-md-9 ms-sm-auto col-lg-10 px-md-4"></main></div></div>');function ve(p){const[s,{updateUserInfo:a}]=y(),l=()=>{a({id:void 0,email:void 0,token:void 0})};return c(z,{get children(){return[(()=>{const e=be.cloneNode(!0),t=e.firstChild,n=t.nextSibling,m=n.nextSibling,i=m.firstChild,d=i.firstChild,r=d.firstChild;return d.$$click=l,g(d,()=>s.email,r),e})(),(()=>{const e=he.cloneNode(!0),t=e.firstChild,n=t.firstChild;return g(t,c(ie,{}),n),g(n,c(H,{get children(){return[c(N,{path:"/",get element(){return c(F,{})}}),c(N,{path:"/products",get element(){return c(F,{})}}),c(N,{path:"/createproduct",get element(){return c(me,{})}}),c(N,{path:"/*all",get element(){return c(ge,{})}})]}}),null),g(n,c(Y,{}),null),e})()]}})}S(["click"]);function _e(){const[p,{_:s}]=y();return c(Q,{get when(){return p.token},get fallback(){return c(se,{})},get children(){return c(ve,{})}})}W(()=>c(ee,{get children(){return c(_e,{})}}),document.getElementById("main"));
